<!DOCTYPE html>
<html lang="en">
  <head>
    <div id="head_template"></div>
  </head>
  <body class="sidebar-mini">
    <div class="wrapper">
      <div id='sidebar_placeholder'></div>
      <div id='load'>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <center>
          <img class="collapse show" height="200px" width="200px" src="/nist/assets/img/loading.gif">
        </center>
      </div>
      <div id="main-panel" class="main-panel" style="visibility:hidden">
        <!-- Navbar -->
        <div id="nav_template"></div>
        <!-- End Navbar -->
        <div class="content">
          <br>
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-12">
                <div class="card bootstrap-table">
                  <div class="card-header">
                    <center>
                      <h3 class="card-title">LABCAS Collections</h3>
                    </center>
                    <hr width="25%">
                  </div>
                  <div class="card-body table-full-width">
                    <form class="navbar-form navbar-left navbar-search-form" role="search" action="javascript:search();">
                      <div class="input-group" style="margin-left: auto; margin-right: auto; width: 20%; border-style: solid; border-width: .5px; border-color: silver; border-radius: 5px;" data-step=8 data-intro='Main Labcas search for Labcas collections, datasets, and files'>
                        <div class='col-md-1'>
                          <i class="nc-icon nc-zoom-split"></i>
                        </div>
                        <div class='col-md-11'>
                          <input id="search_text_main" type="text" class="form-control" placeholder="Labcas Full Search..." style="width:100%">
                        </div>
                      </div>
                      <center>
                        <i>While searching, use * for wildcards</i>
                      </center>
                    </form>
                    <table id="collection-table" class="table" data-step=9 data-intro='Labcas list of collections'>
                      <thead>
                        <th data-field="state"></th>
                        <th data-field="collection" data-sortable="true">Collection</th>
                        <th data-field="discipline" data-sortable="true" data-visible="true">Discipline</th>
                        <th data-field="category" data-sortable="false">Study Type</th>
                        <th data-field="institution" data-sortable="true" data-visible="true">Institution</th>
                        <th data-field="leadpi" data-sortable="true">Lead PoC</th>
                        <th data-field="actions" class="td-actions text-right" data-events="operateEvents" data-formatter="">Actions</th>
                      </thead>
                      <tbody>
                        <center>
                          <img id="loading" class="collapse show" height="50px" width="50px" src="/nist/assets/img/loading.gif">
                        </center>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer role='contentinfo' class='labcas-footer' id="footer_template"></footer>
      </div>
    </div>
  </body>
  <!--   Core JS Files   -->
  <script src="/nist/assets/js/core/jquery-3.5.1.min.js" type="text/javascript"></script>
  <script src="/nist/assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="/nist/assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
  <script src="/nist/assets/js/plugins/bootstrap-switch.js"></script>
  <!--  Chartist Plugin  -->
  <script src="/nist/assets/js/plugins/chartist.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="/nist/assets/js/plugins/bootstrap-notify.js"></script>
  <!--  jVector Map  -->
  <script src="/nist/assets/js/plugins/jquery-jvectormap.js" type="text/javascript"></script>
  <!--  Plugin for Date Time Picker and Full Calendar Plugin-->
  <script src="/nist/assets/js/plugins/moment.min.js"></script>
  <!--  DatetimePicker   -->
  <script src="/nist/assets/js/plugins/bootstrap-datetimepicker.js"></script>
  <!--  Sweet Alert  -->
  <script src="/nist/assets/js/plugins/sweetalert2.min.js" type="text/javascript"></script>
  <!--  Tags Input  -->
  <script src="/nist/assets/js/plugins/bootstrap-tagsinput.js" type="text/javascript"></script>
  <!--  Sliders  -->
  <script src="/nist/assets/js/plugins/nouislider.js" type="text/javascript"></script>
  <!--  Bootstrap Select  -->
  <script src="/nist/assets/js/plugins/bootstrap-selectpicker.js" type="text/javascript"></script>
  <!--  jQueryValidate  -->
  <script src="/nist/assets/js/plugins/jquery.validate.min.js" type="text/javascript"></script>
  <!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
  <script src="/nist/assets/js/plugins/jquery.bootstrap-wizard.js"></script>
  <!--  Bootstrap Table Plugin -->
  <script src="/nist/assets/js/plugins/bootstrap-table.js"></script>
  <!--  DataTable Plugin -->
  <script src="/nist/assets/js/plugins/jquery.dataTables.min.js"></script>
  <!--  Full Calendar   -->
  <script src="/nist/assets/js/plugins/fullcalendar.min.js"></script>
  <!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="/nist/assets/js/light-bootstrap-dashboard.js?v=2.0.1" type="text/javascript"></script>
  <script src="/nist/assets/js/plugins/js.cookie.js"></script>
  <script src="/nist/assets/js/labcas/authentication.js?version=3.0.0"></script>
  <script src="/nist/assets/js/labcas/labcas-sidebar.js"></script>
  <script src="/nist/assets/js/labcas/utils.js?version=3.0.0"></script>
  <script src="/nist/assets/js/labcas/search.js?version=3.0.0"></script>
  <script src="/nist/assets/js/labcas/collections.js?version=3.0.0"></script>
  <script src="/nist/assets/js/intro.js?101"></script>
  <script type="text/javascript">
    document.onreadystatechange = function() {
      var state = document.readyState
      if (state == 'interactive') {
        document.getElementById('main-panel').style.visibility = "hidden";
      } else if (state == 'complete') {
        setTimeout(function() {
          document.getElementById('load').style.display = "none";
          document.getElementById('main-panel').style.visibility = "visible";
        }, 1000);
      }
    }

    var $table = $('#collection-table');

    function operateFormatter(value, row, index) {
	    return [
            '<a rel="tooltip" title="Favorite" class="btn btn-link btn-info table-action view" href="javascript:void(0)">',
            '<i class="fa fa-star"></i>',
            '</a>',
            '<a rel="tooltip" title="Share" class="btn btn-link btn-warning table-action edit" href="javascript:void(0)">',
            '<i class="fa fa-share"></i>',
            '</a>'
        ].join('');
    }
    $().ready(function() {
      initCookies();
      //Lead header scripts
      $("#head_template").load("/nist/templates.html?version=3.0.0 #head_template");
      $("#nav_template").load("/nist/templates.html?version=3.0.0 #nav_template", function() {
        $("#username_placeholder_second").html(Cookies.get('user'));
        if (Cookies.get('user') == "Sign in") {
          $("#username_placeholder_third").html(Cookies.get('user'));
          $("#loggedout_msg").show();
        } else {
          $("#loggedout_msg").hide();
        }
      });
      $("#footer_template").load("/nist/templates.html #footer_template_" + localStorage.getItem("environment_name"));
      $("#sidebar_placeholder").load("/nist/sidebar_" + localStorage.getItem("environment_name") + ".html?version=3.0.0");
      setup_labcas_data("collections", "*:*");
      window.operateEvents = {
        'click .view': function(e, value, row, index) {
          info = JSON.stringify(row);
          swal('You click view icon, row: ', info);
        },
        'click .edit': function(e, value, row, index) {
          info = JSON.stringify(row);
          swal('You click edit icon, row: ', info);
        },
        'click .remove': function(e, value, row, index) {
          $table.bootstrapTable('remove', {
            field: 'id',
            values: [row.id]
          });
        }
      };
      introJs().setOption("overlayOpacity", 0);
      setTimeout(function() {
        init_file_checkboxes('none');
      }, 1000);
    });
  </script>
</html>
